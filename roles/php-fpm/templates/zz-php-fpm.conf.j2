# Generated by Ansible at {{ ansible_date_time.iso8601 }}

# Allow php to handle Multiviews.
AddType text/html .php

# Add index.php to the list of files that will be served as directory indexes.
DirectoryIndex index.php

# Enable http authorization headers.
SetEnvIfNoCase ^Authorization$ "(.+)" HTTP_AUTHORIZATION=$1

{% for pool in phpfpm_pools -%}
<Proxy "unix:{{ pool.listen | default('/run/php-fpm/' + pool.name + '.sock') }}|fcgi://{{ pool.name }}">
    ProxySet min=0
    ProxySet timeout={{ pool.fastcgi_timeout | default(pool.terminate_timeout) | default('60') }}
</Proxy>
{% endfor %}

{% if phpfpm_default_pool -%}
<FilesMatch \.php$>
    SetHandler "proxy:fcgi://{{ phpfpm_default_pool }}"
</FilesMatch>
{% endif %}
